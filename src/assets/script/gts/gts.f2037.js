(function(root){var exports=undefined,module=undefined,require=undefined;var define=undefined;(function(){var gts,__decorate=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(o=t[h])&&(a=(n<3?o(a):n>3?o(e,i,a):o(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a;};(function(t){const{ccclass:e,property:i,menu:s,requireComponent:o}=cc._decorator;let n=class extends cc.Component{onLoad(){let t=this.node.getComponent(cc.Sprite);t&&(t.enabled=!1);}start(){}};n=__decorate([e("gt.AutoDisableSprite"),s("gt/AutoUI/DisableSpr"),o(cc.Sprite)],n),t.AutoDisableSprite=n;})(gts||(gts={})),function(t){let e,i;(function(t){t[t.FILL=0]="FILL",t[t.FIX_WITH_WIDTH=1]="FIX_WITH_WIDTH",t[t.FIX_WITH_HEIGHT=2]="FIX_WITH_HEIGHT",t[t.FIX_WITH_MIN=3]="FIX_WITH_MIN";})(e=t.AutoScaleType||(t.AutoScaleType={})),function(t){t[t.ANY_TIME=0]="ANY_TIME",t[t.W_OUT_OF_RANGE=1]="W_OUT_OF_RANGE",t[t.H_OUT_OF_RANGE=2]="H_OUT_OF_RANGE",t[t.BOTH_OUT_OF_RANGE=3]="BOTH_OUT_OF_RANGE",t[t.W_OR_H_OUT_OF_RANGE=4]="W_OR_H_OUT_OF_RANGE";}(i=t.AutoScaleChance||(t.AutoScaleChance={}));const{ccclass:s,property:o,menu:n,requireComponent:a}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.debugFlag=!1,this.scaleType=e.FILL,this.refenceParent=!1,this.setNodeScale=!1,this._scaleChance=i.ANY_TIME,this.flag="no_flag_autoscale",this._srcWidth=0,this._srcHeight=0,this._srcScale=1,this._tinkerUped=!1,this._resetNodeSize=!0;}onLoad(){this._srcWidth=this.node.width,this._srcHeight=this.node.height,this._srcScale=this.node.scale;}start(){this.debugFlag&&t.Debug.LogInfo(`...... AutoScale:start( ${this.flag} )`),this.DoAutoScale(),this.refenceParent&&this.node.parent.on(cc.Node.EventType.SIZE_CHANGED,()=>{this.DoAutoScale();},this);}get nodeSize(){return new cc.Size(this.node.width*this.node.scaleX,this.node.height*this.node.scaleY);}get refenceSize(){let t=this.refenceParent&&this.node.parent?this.node.parent.width:cc.winSize.width,e=this.refenceParent&&this.node.parent?this.node.parent.height:cc.winSize.height;return new cc.Size(t,e);}DoAutoScale(){if(this._scaleChance===i.ANY_TIME)this.AutoScaleAnyTime();else{let e=this.nodeSize,s=this.refenceSize,o=!1;this._scaleChance===i.BOTH_OUT_OF_RANGE?e.width>s.width&&s.height>s.height&&(o=!0,t.Debug.LogInfo("AutoScaleChance.BOTH_OUT_OF_RANGE do auto scale")):this._scaleChance===i.W_OUT_OF_RANGE?e.width>s.width&&(o=!0,t.Debug.LogInfo("AutoScaleChance.W_OUT_OF_RANGE do auto scale")):this._scaleChance===i.H_OUT_OF_RANGE?e.height>s.height&&(o=!0,t.Debug.LogInfo("AutoScaleChance.H_OUT_OF_RANGE do auto scale")):this._scaleChance===i.W_OR_H_OUT_OF_RANGE?(e.width>s.width||s.height>s.height)&&(o=!0,t.Debug.LogInfo("AutoScaleChance.W_OR_H_OUT_OF_RANGE do auto scale")):t.Debug.LogInfo(`AutoScaleChance.unknow type = ${this._scaleChance}`),o||(o=this.AllowResetSize()),o&&(this._tinkerUped=!0,this.AutoScaleAnyTime());}}AllowResetSize(){let t=!1,i=this.GetUsefulScale();if(this.setNodeScale)t=i<=this._srcScale;else{let s=this._srcWidth*i,o=this._srcHeight*i;this.scaleType===e.FIX_WITH_WIDTH?s<=this._srcWidth&&(t=!0):this.scaleType===e.FIX_WITH_HEIGHT?o<=this._srcHeight&&(t=!0):this.scaleType===e.FIX_WITH_MIN&&s<=this._srcWidth&&o<=this._srcHeight&&(t=!0);}return t;}GetUsefulScale(){let t=cc.winSize.height/this.node.height,i=cc.winSize.width/this.node.width;this.refenceParent&&this.node.parent&&(t=this.node.parent.height/this.node.height,i=this.node.parent.width/this.node.width);return this.scaleType===e.FIX_WITH_WIDTH?i:this.scaleType===e.FIX_WITH_HEIGHT?t:this.scaleType===e.FIX_WITH_MIN?i<t?i:t:i>t?i:t;}AutoScaleAnyTime(){let t=this.GetUsefulScale();this.setNodeScale?this.node.scale=t:(this.node.width=this._srcWidth*t,this.node.height=this._srcHeight*t);}};__decorate([o(cc.Boolean)],h.prototype,"debugFlag",void 0),__decorate([o({type:cc.Enum(e)})],h.prototype,"scaleType",void 0),__decorate([o(cc.Boolean)],h.prototype,"refenceParent",void 0),__decorate([o(cc.Boolean)],h.prototype,"setNodeScale",void 0),__decorate([o({displayName:"\u8c03\u6574\u65f6\u673a",visible:!0,type:cc.Enum(i)})],h.prototype,"_scaleChance",void 0),__decorate([o],h.prototype,"flag",void 0),h=__decorate([s("gt.AutoScale"),n("gt/AutoUI/AutoScale")],h),t.AutoScale=h;}(gts||(gts={})),function(t){const{ccclass:e,property:i,menu:s}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.onloadFix=!0;}onLoad(){this.onloadFix&&this.FixWidget();}start(){this.onloadFix||this.FixWidget();}FixWidget(){let t=this.node.getComponent(cc.Widget);t&&(t.left=t.right=t.top=t.bottom=0,t.updateAlignment());}};__decorate([i(cc.Boolean)],o.prototype,"onloadFix",void 0),o=__decorate([e("gt.AutoWidgetZero"),s("gt/AutoUI/AutoWidgetZero")],o),t.AutoWidgetZero=o;}(gts||(gts={})),function(t){t.KEY_REG_CB="_pw_ui_onclicked_",t.BTN_DEFAULT_SCALE=0.95;}(gts||(gts={})),function(t){const{ccclass:e,property:i,menu:s}=cc._decorator;let o;(function(t){t[t.TOTAL=0]="TOTAL",t[t.SINGLE_FRAME=1]="SINGLE_FRAME";})(o=t.DurationType||(t.DurationType={}));let n=class extends cc.Component{constructor(){super(...arguments),this._atlas=null,this._frameCnt=0,this._duration=0,this._singleFrameDuration=0.1,this._frameNameFmt="",this._defaultFrame=null,this._renderer=null,this._playOnLoad=!1,this._defaultPlayCnt=1,this._durationType=o.TOTAL,this._showDefaultAtStop=!0,this._startIdx=0,this._totalTime=0,this._frameTime=0,this._useTime=-1,this._loopCount=0,this._currentIdx=0,this._lastNotifyIndex=-1,this._lastFrameIdx=-1,this._onCompletedNotify=()=>{};}set startIdx(e){(null==e||isNaN(e))&&t.Debug.LogErr("gts::FrameAnimation startIdx is no a number"),this._startIdx=e;}get startIdx(){return this._startIdx;}SetDurationType(t){this._durationType=t;}set atlas(t){this._atlas=t;}get atlas(){return this._atlas;}set frameCnt(t){this._frameCnt=t;}get frameCnt(){return this._frameCnt;}set duration(t){this._durationType===o.TOTAL?this._duration=t:this._singleFrameDuration=t,this.UpdateFrameTime();}set frameNameFmt(t){this._frameNameFmt=t;}get frameNameFmt(){return this._frameNameFmt;}SetDefaultFrameName(t){let e=this.atlas?this.atlas.getSpriteFrame(t):null;this.defaultFrame=e;}get duration(){return this._durationType===o.TOTAL?this._duration:this._singleFrameDuration;}set defaultFrame(t){this._defaultFrame=t;}get defaultFrame(){return this._defaultFrame;}set renderer(t){this._renderer=t;}get renderer(){return this._renderer?this._renderer:this.getComponent(cc.Sprite);}static Play(t,e){t&&t.Play(e);}static Stop(t,e=!0){t&&t.Stop(e);}Play(t=0){this.renderer&&(0===t&&(t=this._defaultPlayCnt),this._useTime=this._frameTime,this._loopCount=t,this.renderer.node.active=!0,this._currentIdx=0,this.SetFrame(this._currentIdx));}Stop(t=!0){this.renderer&&(this._useTime=-1,this.renderer.node.active=!t,this._showDefaultAtStop&&(this.renderer.spriteFrame=this._defaultFrame));}SetFrame(e){if(this._lastFrameIdx==e)return;let i=t.Str.FmtStr(this._frameNameFmt,e+this._startIdx),s=this.atlas?this.atlas.getSpriteFrame(i):null;this.renderer.spriteFrame=s;}OnLoopOnceFinish(){}OnPlayCompletedNotify(t,e){return t?(this._onCompletedNotify=e?t.bind(e):t,this._onCompletedNotify):null;}OnPlayCompleted(){this._onCompletedNotify(this);}onLoad(){this.UpdateFrameTime();}UpdateFrameTime(){this._frameTime=this._durationType===o.TOTAL?this._duration/this._frameCnt:this._singleFrameDuration;}static SetInfos(t,e,i,s,n=o.SINGLE_FRAME,a=0.1){t&&(t.SetDefaultFrameName(e),t.frameCnt=s,t.frameNameFmt=i,t.SetDurationType(n),t._singleFrameDuration=a,t.UpdateFrameTime());}start(){this._playOnLoad&&this.Play();}update(t){let e=t;if(this._useTime>=0&&(this._useTime-=e,this._useTime<0)){let t=!0,e=!1;this._currentIdx+=1,this._currentIdx>=this._frameCnt&&(this.OnLoopOnceFinish(),e=!0,this._currentIdx=this._frameCnt-1,this._loopCount>0&&(this._loopCount-=1,this._loopCount<=0&&(t=!1,this.OnPlayCompleted())),t&&(this._currentIdx=0)),this.SetFrame(this._currentIdx),t&&(this._useTime=this._frameTime),e&&(this._lastNotifyIndex=-1);}}};__decorate([i({type:cc.SpriteAtlas,visible:!0})],n.prototype,"_atlas",void 0),__decorate([i({displayName:"\u5e27\u6570",visible:!0})],n.prototype,"_frameCnt",void 0),__decorate([i({displayName:"\u52a8\u753b\u65f6\u95f4",visible(){return this._durationType===o.TOTAL;}})],n.prototype,"_duration",void 0),__decorate([i({displayName:"\u5355\u5e27\u65f6\u95f4",visible(){return this._durationType===o.SINGLE_FRAME;}})],n.prototype,"_singleFrameDuration",void 0),__decorate([i({displayName:"\u56fe\u7247\u540d\u683c\u5f0f",visible:!0})],n.prototype,"_frameNameFmt",void 0),__decorate([i({displayName:"\u9ed8\u8ba4\u5e27",visible:!0,type:cc.SpriteFrame})],n.prototype,"_defaultFrame",void 0),__decorate([i({type:cc.Sprite,visible:!0})],n.prototype,"_renderer",void 0),__decorate([i({displayName:"\u81ea\u52a8\u64ad\u653e",visible:!0})],n.prototype,"_playOnLoad",void 0),__decorate([i({displayName:"\u9ed8\u8ba4\u64ad\u653e\u6b21\u6570",visible:!0})],n.prototype,"_defaultPlayCnt",void 0),__decorate([i({displayName:"\u65f6\u95f4\u6a21\u5f0f",visible:!0,type:cc.Enum(o)})],n.prototype,"_durationType",void 0),__decorate([i({displayName:"\u505c\u6b62\u65f6\u663e\u793a\u9ed8\u8ba4\u56fe\u7247",visible:!0})],n.prototype,"_showDefaultAtStop",void 0),__decorate([i({displayName:"\u8d77\u59cb\u7d22\u5f15",type:cc.Integer,visible:!0})],n.prototype,"_startIdx",void 0),n=__decorate([e("gt.FrameAnimation"),s("gt/FrameAnimation")],n),t.FrameAnimation=n;}(gts||(gts={})),function(t){const{ccclass:e,property:i,menu:s,requireComponent:o}=cc._decorator;let n,a;(function(t){t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Grid=3]="Grid";})(n=t.ListType||(t.ListType={})),function(t){t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical";}(a=t.StartAxisType||(t.StartAxisType={}));let h=class extends cc.Component{constructor(){super(...arguments),this.itemRender=null,this.type=n.Vertical,this.startAxis=a.Horizontal,this.spaceX=0,this.spaceY=0,this.padding_top=0,this.padding_buttom=0,this.padding_left=0,this._padding=0,this.padding_right=0,this._scrollView=null,this.content=null,this.itemDataList=[],this.spawnCount=0,this.itemList=[],this.itemHeight=0,this.itemWidth=0,this.itemPool=[],this.lastContentPosX=0,this.lastContentPosY=0,this.gridRow=0,this.gridCol=0,this.updateTimer=0,this.updateInterval=0.1,this.bScrolling=!1,this.updateFun=function(){},this._funcHalfScrollview=()=>0,this._forceRefresh=!1;}get halfScrollView(){return this._funcHalfScrollview();}onLoad(){this.itemRender&&(this.itemRender.active=!1);}get scrollView(){return this._scrollView||(this.itemHeight=this.itemRender.getComponent(cc.UITransformComponent).height,this.itemWidth=this.itemRender.getComponent(cc.UITransformComponent).width,this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this.scrollView.content,this.content.getComponent(cc.UITransformComponent).anchorX=0,this.content.getComponent(cc.UITransformComponent).anchorY=1,this.content.removeAllChildren(),this.scrollView.node.on("scrolling",this.onScrolling,this)),this._scrollView;}setData(t,e=null,i=null){this.scheduleOnce(()=>{this.itemDataList=t.slice(),this.updateContent(),e&&e.call(i);},0);}countListParam(){let t=this.itemDataList.length;this.type==n.Vertical?(this.scrollView.horizontal=!1,this.scrollView.vertical=!0,this.content.width=this.content.parent.width,this.content.height=t*this.itemHeight+(t-1)*this.spaceY+this.padding_top+this.padding_buttom,this.spawnCount=Math.round(this.scrollView.node.height/(this.itemHeight+this.spaceY))+2,this._funcHalfScrollview=()=>this.scrollView.node.height/2+this.itemHeight/2+this.spaceY,this.updateFun=this.updateV):this.type==n.Horizontal?(this.scrollView.horizontal=!0,this.scrollView.vertical=!1,this.content.width=t*this.itemWidth+(t-1)*this.spaceX+this.padding_left+this.padding_right,this.content.height=this.content.parent.height,this.spawnCount=Math.round(this.scrollView.node.width/(this.itemWidth+this.spaceX))+2,this._funcHalfScrollview=()=>this.scrollView.node.width/2+this.itemWidth/2+this.spaceX,this.updateFun=this.udpateH):this.type==n.Grid&&(this.startAxis==a.Vertical?(this.scrollView.horizontal=!1,this.scrollView.vertical=!0,this.content.width=this.content.parent.width,this.padding_left+this.padding_right+this.itemWidth+this.spaceX>this.content.width&&(this.padding_left=0,this.padding_right=0,console.error("padding_left\u6216padding_right\u8fc7\u5927")),this.gridCol=Math.floor((this.content.width-this.padding_left-this.padding_right)/(this.itemWidth+this.spaceX)),this.gridRow=Math.ceil(t/this.gridCol),this.content.height=this.gridRow*this.itemHeight+(this.gridRow-1)*this.spaceY+this.padding_top+this.padding_buttom,this.spawnCount=Math.round(this.scrollView.node.height/(this.itemHeight+this.spaceY))*this.gridCol+2*this.gridCol,this._funcHalfScrollview=()=>this.scrollView.node.height/2+this.itemHeight/2+this.spaceY,this.updateFun=this.updateGrid_V):this.startAxis==a.Horizontal&&(this.scrollView.horizontal=!0,this.scrollView.vertical=!1,this.content.height=this.content.parent.height,this.padding_top+this.padding_buttom+this.itemHeight+this.spaceY>this.content.height&&(this.padding_top=0,this.padding_buttom=0,console.error("padding_top\u6216padding_buttom\u8fc7\u5927")),this.gridRow=Math.floor((this.content.height-this.padding_top-this.padding_buttom)/(this.itemHeight+this.spaceY)),this.gridCol=Math.ceil(t/this.gridRow),this.content.width=this.gridCol*this.itemWidth+(this.gridCol-1)*this.spaceX+this.padding_left+this.padding_right,this.spawnCount=Math.round(this.scrollView.node.width/(this.itemWidth+this.spaceX))*this.gridRow+2*this.gridRow,this._funcHalfScrollview=()=>this.scrollView.node.width/2+this.itemWidth/2+this.spaceX,this.updateFun=this.updateGrid_H));}createList(e,i){this.itemDataList.length>this.spawnCount&&e+this.spawnCount-1>=this.itemDataList.length?(e=this.itemDataList.length-this.spawnCount,i=this.scrollView.getMaxScrollOffset()):this.itemDataList.length<=this.spawnCount&&(e=0);for(let h=0;h<this.spawnCount;h++){let i;if(!(h+e<this.itemDataList.length)){this.itemList.length>this.itemDataList.length-e&&((i=this.itemList.pop()).removeFromParent(),this.itemPool.push(i));continue;}null==this.itemList[h]?((i=this.getItem()).active=!0,this.itemList.push(i),i.parent=this.content):i=this.itemList[h];let r=i.getComponent(t.ListItem);if(r.itemIndex=h+e,r.data=this.itemDataList[h+e],r.OnDataChanged(),this.type==n.Vertical)i.setPosition(this.content.width/2,-i.height*(0.5+h+e)-this.spaceY*(h+e)-this.padding_top);else if(this.type==n.Horizontal)i.setPosition(i.width*(0.5+h+e)+this.spaceX*(h+e)+this.padding_left,-this.content.height/2);else if(this.type==n.Grid)if(this.startAxis==a.Vertical){var s=Math.floor((h+e)/this.gridCol),o=(h+e)%this.gridCol;i.setPosition(i.width*(0.5+o)+this.spaceX*o+this.padding_left,-i.height*(0.5+s)-this.spaceY*s-this.padding_top),i.opacity=255;}else this.startAxis==a.Horizontal&&(s=(h+e)%this.gridRow,o=Math.floor((h+e)/this.gridRow),i.setPosition(i.width*(0.5+o)+this.spaceX*o+this.padding_left,-i.height*(0.5+s)-this.spaceY*s-this.padding_top),i.opacity=255);}this.scrollView.scrollToOffset(i);}getItem(){return 0==this.itemPool.length?cc.instantiate(this.itemRender):this.itemPool.pop();}update(t){0!=this.bScrolling&&(this.updateTimer+=t,this.updateTimer<this.updateInterval||(this.updateTimer=0,this.bScrolling=!1,this.updateFun()));}onScrolling(){this.bScrolling=!0;}updateV_up(e,i){let s=e.getComponent(t.ListItem),o=s.itemIndex+this.itemList.length;s.itemIndex=o,s.data=this.itemDataList[o],s.OnDataChanged(),e.y=e.y-i;}updateV_down(e,i){let s=e.getComponent(t.ListItem),o=s.itemIndex-this.itemList.length;s.itemIndex=o,s.data=this.itemDataList[o],s.OnDataChanged(),e.y=e.y+i;}updateV(){let t=this.itemList,e=null,i=this.halfScrollView,s=this._forceRefresh||this.scrollView.content.y>this.lastContentPosY,o=(this.itemHeight+this.spaceY)*t.length;for(let n=0;n<t.length;n++){e=t[n];let a=this.getPositionInView(e);if(s){if(this._forceRefresh)for(;a.y>i&&e.y-o-this.padding_buttom>-this.content.height;)this.updateV_up(e,o);else a.y>i&&e.y-o-this.padding_buttom>-this.content.height&&this.updateV_up(e,o);}else if(this._forceRefresh)for(;a.y<-i&&e.y+o+this.padding_top<0;)this.updateV_down(e,o);else a.y<-i&&e.y+o+this.padding_top<0&&this.updateV_down(e,o);}this.lastContentPosY=this.scrollView.content.y,this._forceRefresh=!1;}udpateH(){let e,i=this.itemList,s=this.halfScrollView,o=this.scrollView.content.x>this.lastContentPosX,n=(this.itemWidth+this.spaceX)*i.length;for(let a=0;a<i.length;a++){e=i[a];let h=this.getPositionInView(e);if(o){if(h.x>s&&e.x-n-this.padding_left>0){let s=e.getComponent(t.ListItem),o=s.itemIndex-i.length;s.itemIndex=o,s.data=this.itemDataList[o],s.OnDataChanged(),e.x=e.x-n;}}else if(h.x<-s&&e.x+n+this.padding_right<this.content.width){let s=e.getComponent(t.ListItem),o=s.itemIndex+i.length;s.itemIndex=o,s.data=this.itemDataList[o],s.OnDataChanged(),e.x=e.x+n;}}this.lastContentPosX=this.scrollView.content.x;}updateGrid_V(){let e,i=this.itemList,s=this.halfScrollView,o=this.scrollView.content.y>this.lastContentPosY,n=(this.itemHeight+this.spaceY)*(this.spawnCount/this.gridCol);for(let a=0;a<i.length;a++){e=i[a];let h=this.getPositionInView(e);if(o){if(h.y>s&&e.y-n-this.padding_buttom>-this.content.height){let i=e.getComponent(t.ListItem),s=i.itemIndex+this.spawnCount/this.gridCol*this.gridCol;null!=this.itemDataList[s]?(e.y=e.y-n,i.itemIndex=s,i.data=this.itemDataList[s],i.OnDataChanged(),e.opacity=255):(e.y=e.y-n,i.itemIndex=s,e.opacity=0);}}else if(h.y<-s&&e.y+n+this.padding_top<0){let i=e.getComponent(t.ListItem),s=i.itemIndex-this.spawnCount/this.gridCol*this.gridCol;null!=this.itemDataList[s]?(e.y=e.y+n,i.itemIndex=s,i.data=this.itemDataList[s],i.OnDataChanged(),e.opacity=255):(e.y=e.y+n,i.itemIndex=s,e.opacity=0);}}this.lastContentPosY=this.scrollView.content.y;}updateGrid_H(){let e,i=this.itemList,s=this.halfScrollView,o=this.scrollView.content.x>this.lastContentPosX,n=(this.itemWidth+this.spaceX)*(this.spawnCount/this.gridRow);for(let a=0;a<i.length;a++){e=i[a];let h=this.getPositionInView(e);if(o){if(h.x>s&&e.x-n-this.padding_left>0){let i=e.getComponent(t.ListItem),s=i.itemIndex-this.spawnCount/this.gridRow*this.gridRow;null!=this.itemDataList[s]?(e.x=e.x-n,i.itemIndex=s,i.data=this.itemDataList[s],i.OnDataChanged(),e.opacity=255):(e.x=e.x-n,i.itemIndex=s,e.opacity=0);}}else if(h.x<-s&&e.x+n+this.padding_right<this.content.width){let i=e.getComponent(t.ListItem),s=i.itemIndex+this.spawnCount/this.gridRow*this.gridRow;null!=this.itemDataList[s]?(e.x=e.x+n,i.itemIndex=s,i.data=this.itemDataList[s],i.OnDataChanged(),e.opacity=255):(e.x=e.x+n,i.itemIndex=s,e.opacity=0);}}this.lastContentPosX=this.scrollView.content.x;}getPositionInView(t){let e=t.parent.getComponent(cc.UITransformComponent).convertToWorldSpaceAR(t.position);return this.scrollView.node.getComponent(cc.UITransformComponent).convertToNodeSpaceAR(e);}getListData(){return this.itemDataList;}addItem(t){this.itemDataList.push(t),this.updateContent();}addItemAt(t,e){null==this.itemDataList[t]&&this.itemDataList.length!=t||(this.itemDataList.splice(t,1,e),this.updateContent());}deleteItem(t){null!=this.itemDataList[t]&&(this.itemDataList.splice(t,1),this.updateContent());}changeItem(t,e){null!=this.itemDataList[t]&&(this.itemDataList[t]=e,this.updateContent());}refresh(){this.bScrolling=!0,this._forceRefresh=!0;}updateContent(){if(0==this.itemList.length)this.countListParam(),this.createList(0,new cc.Vec2(0,0));else{this.type==n.Vertical?this.itemList.sort((t,e)=>e.position.y-t.position.y):this.type==n.Horizontal?this.itemList.sort((t,e)=>t.position.x-e.position.x):this.type==n.Grid&&(this.startAxis==a.Vertical?(this.itemList.sort((t,e)=>t.position.x-e.position.x),this.itemList.sort((t,e)=>e.position.y-t.position.y)):this.startAxis==a.Horizontal&&(this.itemList.sort((t,e)=>e.position.y-t.position.y),this.itemList.sort((t,e)=>t.position.x-e.position.x))),this.countListParam();var e=this.itemList[0].getComponent(t.ListItem).itemIndex;this.type==n.Grid&&this.startAxis==a.Vertical?e+=(e+this.spawnCount)%this.gridCol:this.type==n.Grid&&this.startAxis==a.Horizontal&&(e+=(e+this.spawnCount)%this.gridRow);var i=this.scrollView.getScrollOffset();i.x=-i.x,this.createList(e,i);}}onDestroy(){let t=this.itemList.length;for(let e=0;e<t;e++)cc.isValid(this.itemList[e],!0)&&this.itemList[e].destroy();this.itemList.length=0,t=this.itemPool.length;for(let e=0;e<t;e++)cc.isValid(this.itemPool[e],!0)&&this.itemPool[e].destroy();this.itemPool.length=0,this.itemDataList.length=0;}};__decorate([i({type:cc.Node,tooltip:"\u6587\u672c\u5c42"}),i({type:cc.Node,tooltip:"\u5217\u8868\u9879"})],h.prototype,"itemRender",void 0),__decorate([i({type:cc.Enum(n),tooltip:"\u6392\u5217\u65b9\u5f0f"})],h.prototype,"type",void 0),__decorate([i({type:cc.Enum(a),tooltip:"\u7f51\u683c\u5e03\u5c40\u4e2d\u7684\u65b9\u5411",visible(){return this.type==n.Grid;}})],h.prototype,"startAxis",void 0),__decorate([i({type:cc.Integer,tooltip:"\u5217\u8868\u9879X\u95f4\u9694",visible(){return this.type==n.Horizontal||this.type==n.Grid;}})],h.prototype,"spaceX",void 0),__decorate([i({type:cc.Integer,tooltip:"\u5217\u8868\u9879Y\u95f4\u9694",visible(){return this.type==n.Vertical||this.type==n.Grid;}})],h.prototype,"spaceY",void 0),__decorate([i({type:cc.Integer,tooltip:"\u4e0a\u95f4\u8ddd",visible(){return this.type==n.Vertical||this.type==n.Grid;}})],h.prototype,"padding_top",void 0),__decorate([i({type:cc.Integer,tooltip:"\u4e0b\u95f4\u8ddd",visible(){return this.type==n.Vertical||this.type==n.Grid;}})],h.prototype,"padding_buttom",void 0),__decorate([i({type:cc.Integer,tooltip:"\u5de6\u95f4\u8ddd",visible(){return this.type==n.Horizontal||this.type==n.Grid;}})],h.prototype,"padding_left",void 0),__decorate([i(cc.Integer)],h.prototype,"_padding",void 0),__decorate([i({type:cc.Integer,tooltip:"\u53f3\u95f4\u8ddd",visible(){return this.type==n.Horizontal||this.type==n.Grid;}})],h.prototype,"padding_right",void 0),h=__decorate([e("gt.List"),s("gt/UI/List"),o(cc.ScrollView)],h),t.List=h;}(gts||(gts={})),function(t){const{ccclass:e,property:i,menu:s}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.data=null,this.itemIndex=0,this._onDataChanged=()=>{},this._onHideNotify=()=>{};}OnDataChangedNotify(t,e){this._onDataChanged=t?e?t.bind(e):t:()=>{};}OnHideNotify(t,e){this._onHideNotify=t?e?t.bind(e):t:()=>{};}OnDataChanged(){this._onDataChanged(this);}OnHide(){this._onHideNotify(this);}};o=__decorate([e("gt.ListItem"),s("gt/UI/ListItem")],o),t.ListItem=o;}(gts||(gts={})),function(t){let e;(function(t){t[t.INFO=0]="INFO",t[t.WARRING=1]="WARRING",t[t.ERROR=2]="ERROR";})(e||(e={}));class i{static set enableLog(t){let e="gts logger closed!";console.log(e),console.warn(e),console.error(e),i._funcLog=t?i._printLogs:()=>{},i._funcLogFormat=t?i._logFormat:()=>{},i._assertFunc=t?i._assert:()=>{},i._funcJsLog=t?console.log:()=>{};}static _printLogs(t,...i){let s="";for(let e=0;e<i.length;++e)s+=`${i} `;switch(t){case e.WARRING:console.warn(s);break;case e.ERROR:console.error(s);break;default:console.log(s);}}static _logFormat(t,i,...s){for(var o=0;o<s.length;++o)i=i.replace(new RegExp("\\{"+o+"\\}","gm"),s[o]);switch(t){case e.WARRING:console.warn(i);break;case e.ERROR:console.error(i);break;default:console.log(i);}}static _assert(t,e=""){console.assert(t,e),console.trace(`ASSERT is false: ${e}`);}static ASSERT(t,e=""){this._assertFunc(t,e);}static LogFormat(t,...i){this._funcLogFormat(e.INFO,t,...i);}static LogErrFormat(t,...i){this._funcLogFormat(e.ERROR,t,...i);}static LogWarrFormat(t,...i){this._funcLogFormat(e.WARRING,t,...i);}static LogInfo(...t){i._funcLog(e.INFO,...t);}static LogWarr(...t){i._funcLog(e.WARRING,...t);}static LogErr(...t){i._funcLog(e.ERROR,...t);}static Log(...t){i._funcJsLog(...t);}}i._funcLog=i._printLogs,i._funcLogFormat=i._logFormat,i._assertFunc=i._assert,i._funcJsLog=console.log,t.Debug=i;}(gts||(gts={})),function(t){class e{static Left(t,e){return 0!=e&&t?e>=t.length?t:t.substr(0,e):"";}static NumToStr(t,e=-1,i="0"){let s=`${t}`;for(;s.length<e;)s=`${i}${s}`;return s;}static RegExpFmt(t){return new RegExp(`\\{${t}:M[0-9]\\}`,"gm");}static FmtStr(t,...i){for(var s=0;s<i.length;++s){let o=(t=t.replace(new RegExp("\\{"+s+"\\}","gm"),i[s])).match(this.RegExpFmt(s));for(let n=0;o&&n<o.length;++n){let a=o[n].replace(`{${s}:M`,"").replace("}",""),h=new RegExp(`\\{${s}:M${a}\\}`,"gm");t=t.replace(h,e.NumToStr(i[s],Number(a)));}}return t;}}t.Str=e;}(gts||(gts={})),function(t){class e{constructor(){this.toggles=[],this.pages=[];}Change2Page(t){if(!(t<0)){t<this.toggles.length&&(this.toggles[t].isChecked=!0);for(let e=0;e<this.pages.length;++e)this.pages[e].active=t===e;}}}t.BindToggleResult=e;class i{static set grayEff(t){this._grayEff=t;}static get grayEff(){return this._grayEff;}static get GT_GRAY_FLAG(){return"__gt_gray_flag";}static get EFF_GRAY_FLAG(){return"isgray";}static get EFF_GRAY_NAME(){return"effGray";}static OnClick(e,i,s,o={zoom:t.BTN_DEFAULT_SCALE}){if(!e)return null;let n=!0,a=null,h=null,r=e.getComponent(cc.Button);r?n="number"!=typeof o&&o.overSet:r=e.addComponent(cc.Button),r&&n&&("number"==typeof o?(r.zoomScale=o,r.transition=cc.Button.Transition.SCALE):(o.zoom&&o.zoom>0&&(r.zoomScale=o.zoom,r.transition=cc.Button.Transition.SCALE),void 0!==o.sound&&null!==o.sound&&("boolean"==typeof o.sound||o.sound),h=o.data));let l=e[t.KEY_REG_CB];return l&&(e.off("click",l),t.Debug.LogWarr(`\u8986\u76d6\u6309\u94ae\u4e8b\u4ef6:${this.PrintPath("OnBtnClicked:",e)}`)),l=()=>{i.call(s,h);},e[t.KEY_REG_CB]=l,e.on("click",l),r;}static PrintPath(e,i){i||t.Debug.LogWarr("gt.UI.PrintPath, node is null");let s=this.NodePath(i);t.Debug.LogWarr(`${e}: ${s}`);}static NodePath(e){if(!e)return t.Debug.LogWarr("gt.UI.NodePath, node is null"),"";let i=e.name;for(;e.parent;)i=`${e.parent.name}/${i}`,e=e.parent;return i;}static SetLab(t,e,i){if(!t)return;let s=i&&i.color?i.color:null,o=i&&i.font?i.font:null;if(t instanceof cc.Label)t.string=`${e}`,s&&(t.node.color=s),o&&(t.font=o);else if(t instanceof cc.RichText)t.string=`${e}`,s&&(t.node.color=s);else{let i=t.getComponent(cc.Label);i&&(i.string=`${e}`,s&&(t.color=s),o&&(i.font=o));let n=t.getComponent(cc.RichText);n&&(n.string=`${e}`,s&&(t.color=s));}}static get TOGGLE_BIND_RESULT(){return"__bind_result__";}static get TOGGLE_IS_BINDED(){return"__isbinded__";}static get TOGGLES(){return"__toggles__";}static BindToggleContainer(s,o,n="toggle_{0}",a="page_{0}",h=null,r=null,l=0){if(!s||s[i.TOGGLE_IS_BINDED])return s[i.TOGGLE_BIND_RESULT];s[i.TOGGLE_BIND_RESULT]=new e(),s[i.TOGGLES]=new Array(),s[i.TOGGLE_IS_BINDED]=!0;let c=0;for(;;){let e=cc.find(t.Str.FmtStr(n,c),s);if(!e)break;let d=c;e.on("click",()=>{let t=s[i.TOGGLE_BIND_RESULT].pages;for(let e=0;e<t.length;++e)t[e].active=e===d;h&&h.call(r,d);},s);let _=o?cc.find(t.Str.FmtStr(a,c),o):null;_&&(_.active=l===c,s[i.TOGGLE_BIND_RESULT].pages.push(_));let p=e.getComponent(cc.Toggle);p&&c===l&&(p.isChecked=!0,h&&h.call(r,l)),s[i.TOGGLE_BIND_RESULT].toggles.push(p),c++;}return isNaN(l)&&isNaN(NaN),s[i.TOGGLE_BIND_RESULT];}static Gray(e,i,s=!0){if(!e)return;let o=null,n=e.getComponent(cc.Sprite);n&&(o=n.getMaterial(0));let a=e.getComponent(cc.Label);if(a&&(o=a.getMaterial(0)),o&&t.Str.Left(o.name,this.EFF_GRAY_NAME.length)===this.EFF_GRAY_NAME&&o.setProperty(this.EFF_GRAY_FLAG,i?0.9:0.1),!s)return;let h=e.children;for(let t=0;t<h.length;++t){let e=h[t];this.Gray(e,i,s);}}}t.UI=i;}(gts||(gts={})),function(t){class e{static IntRandom(i,s){if(isNaN(i)&&(t.Debug.LogErr("GtsUtil:IntRandom, min is NaN"),i=0),isNaN(s)&&(t.Debug.LogErr("GtsUtil:IntRandom, max is NaN"),s=0),i===s)return i;if(i<s){let t=i+Math.floor(Math.random()*(s-i+1));return parseInt(t);}{let t=i;return i=s,s=t,e.IntRandom(i,s);}}static NodeVisible(t,e){t&&(t.active=e);}}t.Util=e;}(gts||(gts={})),window.gts=gts;}).call(root);})(// The environment-specific global.
function(){if(typeof globalThis!=='undefined')return globalThis;if(typeof self!=='undefined')return self;if(typeof window!=='undefined')return window;if(typeof global!=='undefined')return global;if(typeof this!=='undefined')return this;return{};}.call(this));